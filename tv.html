<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Shun.io</title>
<style>
body {
  margin: 0;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
  background: linear-gradient(135deg, #0a0a0a, #1a002a 30%, #0a0a0a 70%);
  background-size: 800% 800%;
  animation: subtleBG 20s ease infinite;
  color: #fff;
}
@keyframes subtleBG {0% {background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}

header { display:flex; justify-content:space-between; align-items:center; background:linear-gradient(90deg,#1a001f,#330044); padding:1rem 2rem; position:sticky; top:0; z-index:100; box-shadow:0 2px 15px rgba(192,0,255,0.5);}
.logo { display:flex; align-items:center; gap:0.5rem;}
.logo img{height:40px;}
.logo h1{font-size:1.5rem;margin:0;}
nav{display:flex; gap:1rem;}
nav a{
  padding:0.5rem 1rem; border-radius:12px; font-weight:500; backdrop-filter:blur(10px); background:rgba(128,0,255,0.2); color:#fff; text-decoration:none; box-shadow:0 0 calc(15px * var(--glow-intensity,1)) rgba(128,0,255,0.4); transition: transform 0.2s, box-shadow 0.1s ease; --glow-intensity:1;
}
nav a:hover { transform:scale(1.05); background:rgba(192,0,255,0.3); box-shadow:0 0 calc(25px * var(--glow-intensity,1)) rgba(192,0,255,0.6); }

.search-bar { position:relative; display:flex; border-radius:12px; overflow:hidden; backdrop-filter:blur(12px); background:rgba(128,0,255,0.2); margin-left:1rem; box-shadow:0 0 calc(15px * var(--glow-intensity,1)) rgba(128,0,255,0.4);}
.search-bar input{ padding:0.5rem 1rem; border:none; outline:none; border-radius:12px; width:220px; color:#fff; font-weight:500; background:linear-gradient(135deg,rgba(128,0,255,0.3),rgba(255,0,200,0.3),rgba(192,0,255,0.3)); backdrop-filter:blur(12px); background-size:200% 200%; animation:liquidGlass 4s linear infinite, glowPulse 2s ease-in-out infinite alternate; box-shadow:0 0 calc(15px * var(--glow-intensity,1)) rgba(128,0,255,0.4); transition:box-shadow 0.1s ease; --glow-intensity:1;}
@keyframes liquidGlass {0% {background-position:0% 50%;}50% {background-position:100% 50%;}100% {background-position:0% 50%;}}
@keyframes glowPulse {0% {box-shadow:0 0 calc(15px * var(--glow-intensity,1)) rgba(128,0,255,0.4);}50% {box-shadow:0 0 calc(35px * var(--glow-intensity,1)) rgba(192,0,255,0.6);}100% {box-shadow:0 0 calc(15px * var(--glow-intensity,1)) rgba(128,0,255,0.4);}}

.player { display:none; padding:1rem 2rem; animation:fadeIn 0.6s ease-in-out; position:relative; --glow-intensity:1;}
.player iframe { width:100%; height:500px; border:none; border-radius:12px; box-shadow:0 0 calc(35px * var(--glow-intensity,1)) rgba(192,0,255,0.6),0 0 60px rgba(128,0,255,0.3) inset; transition:box-shadow 0.3s ease;}

section { padding:2rem 0 1rem 2rem; position:relative;}
section h2 { color:#ff00c8; margin:0 0 1rem 0.5rem; font-size:1.4rem;}

.movie-row-wrapper { position:relative; }
.movie-row { display:flex; gap:1rem; overflow-x:auto; scroll-behavior:smooth; padding-bottom:1rem;}
.movie-row::-webkit-scrollbar { display:none; }

.scroll-btn { position:absolute; top:50%; transform:translateY(-50%); background:linear-gradient(135deg,#8a00ff,#ff00c8); border:none; color:#fff; font-size:2rem; cursor:pointer; width:48px; height:48px; display:flex; justify-content:center; align-items:center; border-radius:50%; z-index:10; transition:transform 0.2s, background 0.3s; box-shadow:0 0 15px rgba(192,0,255,0.6);}
.scroll-btn:hover { transform:scale(1.2); background:linear-gradient(135deg,#ff00c8,#6a00ff);}
.scroll-left { left:0.5rem; }
.scroll-right { right:0.5rem; }

.movie-card { flex:0 0 160px; background:#1a0024; border-radius:12px; overflow:hidden; position:relative; cursor:pointer; transition:transform 0.3s ease, box-shadow 0.3s ease; transform-style:preserve-3d; box-shadow:0 0 calc(15px * var(--glow-intensity,1)) rgba(192,0,255,0.2); opacity:0; transform:scale(0.9); animation:popIn 0.5s forwards;}
.movie-card img { width:100%; display:block; border-radius:12px;}
.movie-card:hover { transform:scale(1.15) perspective(500px) translateZ(20px); box-shadow:0 10px 30px rgba(255,255,255,0.4),0 0 50px rgba(192,0,255,0.6),0 0 20px rgba(128,0,255,0.4) inset; z-index:5;}
.movie-info h3 { font-size:0.9rem; margin:0.2rem 0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
.movie-info p { font-size:0.75rem; color:#bbb; margin:0; }

.rating, .type-badge { background:linear-gradient(90deg,#6a00ff,#c000ff,#ff00c8,#8a00ff); background-size:800% 800%; animation:gradientBG 15s ease infinite; color:#fff !important; position:absolute; top:8px; padding:0.3rem 0.6rem; border-radius:20px; font-size:0.75rem; font-weight:bold; box-shadow:0 0 calc(10px * var(--glow-intensity,1)) rgba(192,0,255,0.6); text-shadow:0 1px 2px rgba(0,0,0,0.45); }

@keyframes gradientBG {0% {background-position:0% 50%;}50% {background-position:100% 50%;}100% {background-position:0% 50%;}}
@keyframes popIn { from {opacity:0; transform:scale(0.9);} to {opacity:1; transform:scale(1);}}
@keyframes fadeIn { from {opacity:0;} to {opacity:1;}}
</style>
</head>
<body>
<header>
  <div class="logo">
    <img src="https://files.catbox.moe/9o8pf5.png" alt="Logo" />
    <h1>Shun.io</h1>
  </div>
  <nav>
    <a href="#">Home</a>
    <a href="#">Movies</a>
    <a href="#">TV Shows</a>
    <a href="#">Anime</a>
  </nav>
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search..." oninput="liveSearch()" />
  </div>
</header>
<div class="player" id="playerSection">
  <iframe id="playerFrame" src="" allowfullscreen></iframe>
</div>
<main id="content"></main>

<script>
const API_KEY="c1ee0ca8883b37edc7b96ed780a17f5d";
const IMG_BASE="https://image.tmdb.org/t/p/w500";
let movieGenres=[], tvGenres=[], rowPages={}, currentFilter="all";
let searchQuery="";
const content=document.getElementById("content");

function renderRow(items, container, type){
  items.forEach((item,i)=>{
    if(!item.poster_path) return;
    const card=document.createElement("div");
    card.className="movie-card";
    card.style.animationDelay=`${i*0.05}s`;
    card.innerHTML=`
      <img src="${IMG_BASE+item.poster_path}" alt="${item.title||item.name}" />
      <div class="rating">${item.vote_average.toFixed(1)}</div>
      <div class="type-badge">${type==='movie'?'Movie':'TV'}</div>
      <div class="movie-info"><h3>${item.title||item.name}</h3><p>${type==='movie'?'Movie':'TV Show'}</p></div>
    `;
    card.onclick=()=>{ type==='movie'?loadPlayer(item.id):loadTVPlayer(item.id); window.scrollTo({top:0,behavior:'smooth'}); };
    container.appendChild(card);
  });
}

function createSection(title,id){
  const section=document.createElement("section");
  section.innerHTML=`<h2>${title}</h2>
    <div class="movie-row-wrapper">
      <button class="scroll-btn scroll-left" onclick="scrollRow('${id}',-1)">&#8249;</button>
      <div class="movie-row" id="${id}"></div>
      <button class="scroll-btn scroll-right" onclick="scrollRow('${id}',1)">&#8250;</button>
    </div>`;
  content.appendChild(section);
}

function scrollRow(id,dir){document.getElementById(id).scrollBy({left:dir*400,behavior:'smooth'});}

async function loadPlayer(id){
  const src=`https://vidora.su/movie/${id}?autoplay=true&colour=ff00c8&logo=https://upload.wikimedia.org/wikipedia/commons/7/7a/Cinema_icon.png`;
  document.getElementById("playerFrame").src=src;
  document.getElementById("playerSection").style.display="block";
  localStorage.setItem('lastVideo',src);
}

async function loadTVPlayer(id){
  const src=`https://vidora.su/tv/${id}/1/1?colour=ff00c8&autoplay=true&autonextepisode=true`;
  document.getElementById("playerFrame").src=src;
  document.getElementById("playerSection").style.display="block";
  localStorage.setItem('lastVideo',src);
}

window.addEventListener('load',()=>{
  const lastVideo=localStorage.getItem('lastVideo');
  if(lastVideo){
    document.getElementById("playerSection").style.display="block";
    document.getElementById("playerFrame").src=lastVideo;
  }
});

let searchTimeout;
function liveSearch(){
  clearTimeout(searchTimeout);
  searchTimeout=setTimeout(async()=>{
    const query=document.getElementById("searchInput").value.trim();
    searchQuery=query;
    content.innerHTML='';
    rowPages={};
    if(!query){ await loadAll(); return; }
    await loadSearch(query);
  },400);
}

async function loadSearch(query){
  const resM=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(query)}&page=1`);
  const movies=(await resM.json()).results;
  if(movies.length){ 
    const id="searchMovies";
    createSection(`ðŸ”Ž Movies for "${query}"`,id);
    renderRow(movies,document.getElementById(id),"movie"); 
    addRowScrollListener(id,"movie");
  }
  const resTV=await fetch(`https://api.themoviedb.org/3/search/tv?api_key=${API_KEY}&query=${encodeURIComponent(query)}&page=1`);
  const tvs=(await resTV.json()).results;
  if(tvs.length){ 
    const id="searchTV";
    createSection(`ðŸ”Ž TV for "${query}"`,id);
    renderRow(tvs,document.getElementById(id),"tv"); 
    addRowScrollListener(id,"tv");
  }
}

function addRowScrollListener(rowId,type,genreId=null){
  const row=document.getElementById(rowId);
  row.addEventListener("scroll",async()=>{
    if(row.scrollLeft + row.clientWidth >= row.scrollWidth - 200){
      const key=genreId?`${type}-${genreId}`:rowId;
      if(!rowPages[key]) rowPages[key]=2;
      let url;
      if(type==='movie' && genreId) url=`https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&with_genres=${genreId}&page=${rowPages[key]}`;
      else if(type==='tv' && genreId) url=`https://api.themoviedb.org/3/discover/tv?api_key=${API_KEY}&with_genres=${genreId}&page=${rowPages[key]}`;
      else if(type==='movie') url=`https://api.themoviedb.org/3/trending/movie/week?api_key=${API_KEY}&page=${rowPages[key]}`;
      else if(type==='tv') url=`https://api.themoviedb.org/3/trending/tv/week?api_key=${API_KEY}&page=${rowPages[key]}`;
      const res=await fetch(url);
      const items=(await res.json()).results;
      renderRow(items,row,type);
      rowPages[key]++;
    }
  });
}

async function loadAll() {
  content.innerHTML = '';
  rowPages = {};
  if (currentFilter === "all" || currentFilter === "movie") {
    const id = "trendingMovies";
    createSection("ðŸ”¥ Trending Movies", id);
    const res = await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=${API_KEY}&page=1`);
    const data = await res.json();
    renderRow(data.results, document.getElementById(id), "movie");
    addRowScrollListener(id, "movie");
  }
  if (currentFilter === "all" || currentFilter === "tv") {
    const id = "trendingTV";
    createSection("ðŸ“º Trending TV Shows", id);
    const res = await fetch(`https://api.themoviedb.org/3/trending/tv/week?api_key=${API_KEY}&page=1`);
    const data = await res.json();
    renderRow(data.results, document.getElementById(id), "tv");
    addRowScrollListener(id, "tv");
  }
  if (currentFilter === "anime") {
    const animMovie = movieGenres.find(g => g.name.toLowerCase() === "animation");
    if (animMovie) {
      const id = `genre-${animMovie.id}-movie-anime`;
      const res = await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&with_genres=${animMovie.id}&page=1`);
      const data = await res.json();
      if (data.results.length) {
        createSection("ðŸŽ¬ Anime Movies", id);
        renderRow(data.results, document.getElementById(id), "movie");
        addRowScrollListener(id, "movie", animMovie.id);
      }
    }
    const animTV = tvGenres.find(g => g.name.toLowerCase() === "animation");
    if (animTV) {
      const id = `genre-${animTV.id}-tv-anime`;
      const res = await fetch(`https://api.themoviedb.org/3/discover/tv?api_key=${API_KEY}&with_genres=${animTV.id}&page=1`);
      const data = await res.json();
      if (data.results.length) {
        createSection("ðŸ“º Anime TV Shows", id);
        renderRow(data.results, document.getElementById(id), "tv");
        addRowScrollListener(id, "tv", animTV.id);
      }
    }
    return;
  }
  if (currentFilter !== "tv") {
    for (const genre of movieGenres) {
      const id = `genre-${genre.id}-movie`;
      const res = await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&with_genres=${genre.id}&page=1`);
      const data = await res.json();
      if (data.results.length) {
        createSection(`ðŸŽ¬ ${genre.name} (Movies)`, id);
        renderRow(data.results, document.getElementById(id), "movie");
        addRowScrollListener(id, "movie", genre.id);
      }
    }
  }
  if (currentFilter !== "movie") {
    for (const genre of tvGenres) {
      const id = `genre-${genre.id}-tv`;
      const res = await fetch(`https://api.themoviedb.org/3/discover/tv?api_key=${API_KEY}&with_genres=${genre.id}&page=1`);
      const data = await res.json();
      if (data.results.length) {
        createSection(`ðŸ“º ${genre.name} (TV Shows)`, id);
        renderRow(data.results, document.getElementById(id), "tv");
        addRowScrollListener(id, "tv", genre.id);
      }
    }
  }
}

document.querySelectorAll("nav a").forEach(a=>{
  a.addEventListener("click",e=>{
    e.preventDefault();
    const txt=a.textContent;
    currentFilter=(txt==="Home"?"all":txt==="Movies"?"movie":txt==="TV Shows"?"tv":"anime");
    searchQuery=""; document.getElementById("searchInput").value="";
    loadAll();
  });
});

(async()=>{
  const resMovies=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`);
  movieGenres=(await resMovies.json()).genres;
  const resTV=await fetch(`https://api.themoviedb.org/3/genre/tv/list?api_key=${API_KEY}`);
  tvGenres=(await resTV.json()).genres;
  loadAll();
})();
</script>
</body>
</html>
